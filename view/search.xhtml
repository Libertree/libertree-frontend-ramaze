<h2>#{_('Search Results for "%s"') % @q}</h2>

<?r if (@profiles.length + @posts.length + @comments.length) == 0 ?>
<p>#{s_('search-results|Nothing found.')}</p>
<?r end ?>

<?r if @profiles.length > 0 ?>
  <h3>#{s_('search-results|Profiles')}</h3>

  <ul>
  <?r @profiles.each do |p| ?>
    <li class="profile">#{member_avatar_link(p.member)} #{member_name_link(p.member)}</li>
  <?r end ?>
  </ul>
<?r end ?>

<?r if @posts.length > 0 ?>
  <h3>#{s_('search-results|Posts')}</h3>

  <ul>
  <?r @posts.each do |p| ?>
    <li class="search-result post">
      <div class="member">
        #{member_avatar_link(p.member)} #{member_name_link(p.member)}
        <span class="timestamp">#{ago(p.time_created)}</span>
      </div>
      <p>#{highlight_query(p.glimpse(160), @q)}</p>
      <a href="/posts/show/#{p.id}">#{_('view post')}</a>
    </li>
  <?r end ?>
  </ul>
<?r end ?>

<?r if @comments.length > 0 ?>
  <h3>#{s_('search-results|Comments')}</h3>

  <ul>
  <?r @comments.each do |c| ?>
    <li class="search-result comment">
      <div class="member">
        #{member_avatar_link(c.member)} #{member_name_link(c.member)}
        <span class="timestamp">#{ago(c.time_created)}</span>
      </div>
      <p>#{highlight_query(c.glimpse(160), @q)}</p>
      <a href="#{ comment_link(c) }">#{_('view comment')}</a>
    </li>
  <?r end ?>
  </ul>
<?r end ?>
